# Peptide Optimization CI/CD æ–‡æ¡£å’Œè„šæœ¬

è¿™ä¸ªç›®å½•åŒ…å«äº†Peptide OptimizationæœåŠ¡çš„æ‰€æœ‰CI/CDç›¸å…³æ–‡ä»¶ï¼ŒåŒ…æ‹¬éƒ¨ç½²è„šæœ¬å’Œç›¸å…³æ–‡æ¡£ã€‚

## ğŸ“‚ ç›®å½•ç»“æ„

```
cicd/
â”œâ”€â”€ scripts/                    # éƒ¨ç½²å’Œç®¡ç†è„šæœ¬
â”‚   â”œâ”€â”€ deploy.sh              # ä¸»éƒ¨ç½²è„šæœ¬
â”‚   â””â”€â”€ start_peptide_service.sh  # æœåŠ¡ç®¡ç†è„šæœ¬
â””â”€â”€ docs/                      # æ–‡æ¡£
    â””â”€â”€ DEPLOYMENT_GUIDE.md    # éƒ¨ç½²æŒ‡å—ï¼ˆæœ¬æ–‡æ¡£ï¼‰
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼ä¸€ï¼šä½¿ç”¨å¿«æ·è„šæœ¬ï¼ˆæ¨èï¼‰

åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨å¿«æ·è„šæœ¬ï¼š

```bash
# éƒ¨ç½²ç®¡ç†
./deploy start          # å¯åŠ¨æœåŠ¡
./deploy stop           # åœæ­¢æœåŠ¡
./deploy status         # æŸ¥çœ‹çŠ¶æ€
./deploy logs           # æŸ¥çœ‹æ—¥å¿—
./deploy test           # æµ‹è¯•è¿æ¥
./deploy check          # ç¯å¢ƒæ£€æŸ¥

# æœåŠ¡ç®¡ç†
./service start         # å¯åŠ¨Peptide OptimizationæœåŠ¡
./service stop          # åœæ­¢æœåŠ¡
./service status        # æŸ¥çœ‹æœåŠ¡çŠ¶æ€
./service logs          # æŸ¥çœ‹å®æ—¶æ—¥å¿—
```

### æ–¹å¼äºŒï¼šç›´æ¥ä½¿ç”¨CI/CDè„šæœ¬

```bash
# è¿›å…¥è„šæœ¬ç›®å½•
cd cicd/scripts/

# å®Œæ•´éƒ¨ç½²
./deploy.sh start

# æœåŠ¡ç®¡ç†
./start_peptide_service.sh start
```

## ğŸ“‹ è„šæœ¬åŠŸèƒ½è¯´æ˜

### æ ¸å¿ƒè„šæœ¬

| è„šæœ¬ | åŠŸèƒ½ | ç”¨é€” |
|------|------|------|
| `deploy.sh` | ä¸»éƒ¨ç½²è„šæœ¬ | ç»Ÿä¸€ç®¡ç†æœåŠ¡çš„éƒ¨ç½²å’ŒçŠ¶æ€æ£€æŸ¥ |
| `start_peptide_service.sh` | æœåŠ¡ç®¡ç† | ç®¡ç†Peptide Optimization APIæœåŠ¡ |

### å¿«æ·è„šæœ¬

| è„šæœ¬ | åŠŸèƒ½ | ç”¨é€” |
|------|------|------|
| `deploy` | éƒ¨ç½²å¿«æ·å…¥å£ | åœ¨é¡¹ç›®æ ¹ç›®å½•å¿«é€Ÿè®¿é—®éƒ¨ç½²åŠŸèƒ½ |
| `service` | æœåŠ¡å¿«æ·å…¥å£ | åœ¨é¡¹ç›®æ ¹ç›®å½•å¿«é€Ÿç®¡ç†æœåŠ¡ |

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

ä¸»è¦é…ç½®åœ¨è„šæœ¬ä¸­å®šä¹‰ï¼š

```bash
# é¡¹ç›®è·¯å¾„
PROJECT_DIR="/home/davis/projects/genion_quantum/peptide_opt"

# æœåŠ¡é…ç½®
CONDA_ENV_NAME="peptide"
SERVICE_PORT=8001

# æ—¥å¿—é…ç½®
LOG_DIR="/home/davis/projects/serverlogs"
LOG_FILE="$LOG_DIR/peptide_opt.log"
```

### Condaç¯å¢ƒ

è„šæœ¬ä¼šè‡ªåŠ¨æ£€æŸ¥å’Œåˆ›å»ºcondaç¯å¢ƒï¼š
- ç¯å¢ƒåç§°ï¼š`peptide`
- é…ç½®æ–‡ä»¶ï¼š`environment.yml`
- è‡ªåŠ¨å®‰è£…ä¾èµ–åŒ…

### æœåŠ¡é…ç½®

- **ç«¯å£**: 8001ï¼ˆæœ¬åœ°æœåŠ¡ï¼Œæ— éœ€åå‘ä»£ç†ï¼‰
- **æ—¥å¿—è·¯å¾„**: `/home/davis/projects/serverlogs/peptide_opt.log`
- **PIDæ–‡ä»¶**: `/home/davis/projects/serverlogs/peptide_opt.pid`

## ğŸ“– éƒ¨ç½²æµç¨‹

1. **ç¯å¢ƒæ£€æŸ¥**: `./deploy check`
2. **å¯åŠ¨æœåŠ¡**: `./deploy start`
3. **éªŒè¯éƒ¨ç½²**: `./deploy status` å’Œ `./deploy test`

## ğŸ” æœåŠ¡ç›‘æ§

### çŠ¶æ€æ£€æŸ¥
```bash
./deploy status     # å®Œæ•´çŠ¶æ€æŠ¥å‘Š
./service status    # æœåŠ¡è¯¦ç»†çŠ¶æ€
```

### æ—¥å¿—ç›‘æ§
```bash
./deploy logs       # å®æ—¶æ—¥å¿—
./service logs      # æœåŠ¡æ—¥å¿—
```

### è¿æ¥æµ‹è¯•
```bash
./deploy test       # æµ‹è¯•APIè¿æ¥
```

## ğŸ”— APIè®¿é—®

æœåŠ¡å¯åŠ¨åå¯é€šè¿‡ä»¥ä¸‹åœ°å€è®¿é—®ï¼š

- **APIæ ¹è·¯å¾„**: http://localhost:8001/
- **å¥åº·æ£€æŸ¥**: http://localhost:8001/health
- **APIæ–‡æ¡£**: http://localhost:8001/docs
- **çŠ¶æ€æŸ¥è¯¢**: http://localhost:8001/status

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æƒé™é—®é¢˜**: ç¡®ä¿æ‰€æœ‰è„šæœ¬æœ‰æ‰§è¡Œæƒé™
   ```bash
   chmod +x cicd/scripts/*.sh
   chmod +x deploy service
   ```

2. **ç¯å¢ƒé—®é¢˜**: æ£€æŸ¥condaç¯å¢ƒå’Œä¾èµ–
   ```bash
   ./deploy check
   ```

3. **ç«¯å£å ç”¨**: è„šæœ¬ä¼šè‡ªåŠ¨æ£€æµ‹å¹¶æç¤ºå¤„ç†

4. **æœåŠ¡çŠ¶æ€**: ä½¿ç”¨çŠ¶æ€æ£€æŸ¥å‘½ä»¤
   ```bash
   ./deploy status
   ```

### æ—¥å¿—ä½ç½®

- **æœåŠ¡æ—¥å¿—**: `/home/davis/projects/serverlogs/peptide_opt.log`
- **é”™è¯¯æ’æŸ¥**: æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ä¸­çš„é”™è¯¯ä¿¡æ¯

### é‡å¯æœåŠ¡

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œå¯ä»¥é‡å¯æœåŠ¡ï¼š
```bash
./deploy restart
```

## ğŸ†š ä¸AstraMoleculaçš„åŒºåˆ«

| ç‰¹æ€§ | AstraMolecula | Peptide Optimization |
|------|---------------|---------------------|
| åå‘ä»£ç† | âœ… æœ‰AutoSSHéš§é“ | âŒ æœ¬åœ°æœåŠ¡ |
| ç«¯å£ | 8000 | 8001 |
| éƒ¨ç½²æ–¹å¼ | äº‘æœåŠ¡å™¨+æœ¬åœ° | ä»…æœ¬åœ° |
| æ—¥å¿—è·¯å¾„ | ç»Ÿä¸€serverlogs | ç»Ÿä¸€serverlogs |
| è„šæœ¬ç»“æ„ | ç›¸åŒ | ç›¸åŒ |

## ğŸ”„ æ›´æ–°è®°å½•

- åˆå§‹ç‰ˆæœ¬ï¼šåŸºäºAstraMoleculaæ¶æ„åˆ›å»º
- ç®€åŒ–éƒ¨ç½²ï¼šå»é™¤åå‘ä»£ç†é…ç½®
- æœ¬åœ°æœåŠ¡ï¼šä¸“æ³¨æœ¬åœ°APIæœåŠ¡

---

*æœ€åæ›´æ–°: 2025å¹´9æœˆ*
